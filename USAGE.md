# 使用文档

## 📖 目录

- [快速开始](#快速开始)
- [功能详解](#功能详解)
- [常见问题](#常见问题)
- [故障排除](#故障排除)
- [高级用法](#高级用法)

## 🚀 快速开始

### 安装步骤

1. **安装 Tampermonkey 扩展**
   - Chrome: [Chrome 网上应用店](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
   - Firefox: [Firefox 附加组件](https://addons.mozilla.org/firefox/addon/tampermonkey/)
   - Edge: [Microsoft Store](https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iagcghmkafpeknjegakphelklogkcdki)

2. **安装用户脚本**
   - 方法一：直接安装
     - 点击 [安装链接](https://github.com/yourusername/video-speed-control/raw/main/cancel_video_pause.js)
     - Tampermonkey 会自动识别并提示安装
   
   - 方法二：手动安装
     ```
     1. 打开 Tampermonkey 仪表板
     2. 点击 "实用工具" 选项卡
     3. 点击 "+" 创建新脚本
     4. 复制 `cancel_video_pause.js` 的内容
     5. 点击 "文件" → "保存" 或按 Ctrl+S
     ```

3. **启用脚本**
   - 确保脚本在 Tampermonkey 仪表板中处于启用状态
   - 刷新目标页面即可生效

### 基本使用

1. **访问目标网站**
   - 打开支持的视频播放页面（如：`https://wsdx.zafu.edu.cn/zsdy/play`）

2. **识别控制面板**
   - 页面加载完成后，右上角会出现黑色半透明的控制面板
   - 面板显示当前播放速度（如："当前: 1.0x"）

3. **调节播放速度**
   - 点击面板中的数字按钮（1x-6x）
   - 选中按钮会变为红色高亮状态
   - 播放速度会立即生效

4. **自动播放功能**
   - 视频会自动开始播放
   - 即使切换浏览器标签页，视频也不会暂停
   - 播放完成后会自动跳转到下一个视频

## 🎯 功能详解

### 倍速控制面板

#### 界面布局
```
┌─────────────────────┐
│      当前: 1.0x      │  ← 当前倍速显示（红色）
├───┬───┬───┬───┬───┬───┤
│ 1x│ 2x│ 3x│ 4x│ 5x│ 6x│  ← 倍速按钮（3x2网格）
└───┴───┴───┴───┴───┴───┘
```

#### 交互特性
- **悬停效果**：鼠标悬停时按钮会放大并变色
- **点击反馈**：选中按钮变为红色，其他按钮恢复默认
- **实时更新**：速度变化立即反映在显示区域

### 自动暂停取消

#### 工作原理
- **事件拦截**：劫持 `visibilitychange` 事件
- **方法覆盖**：重写 `loop_pause` 定时暂停方法
- **后台播放**：允许视频在后台继续播放

#### 适用场景
- 切换浏览器标签页
- 浏览器最小化
- 系统进入屏保状态

### 智能视频切换

#### 切换逻辑
1. **播放完成检测**：监听视频 `ended` 事件
2. **列表识别**：查找页面中的视频播放列表
3. **当前视频定位**：识别标记为已播放的视频项
4. **下一个视频跳转**：自动跳转到下一个视频链接

#### 特殊情况处理
- **最后一个视频**：播放完成后显示庆祝消息
- **列表异常**：提供友好的错误提示
- **链接无效**：跳过无效链接继续处理


### 性能优化建议

1. **减少 DOM 操作**：面板创建后避免频繁重绘
2. **事件委托**：使用事件委托减少事件监听器数量
3. **内存管理**：及时清理不需要的事件监听器
4. **延迟加载**：非关键功能可以延迟执行

### 浏览器兼容性

| 浏览器 | 支持状态 | 备注 |
|--------|----------|------|
| Chrome | ✅ 完全支持 | 推荐使用 |
| Firefox | ✅ 完全支持 | 推荐使用 |
| Edge | ✅ 完全支持 | 基于Chromium |
| Safari | ⚠️ 部分支持 | 需要用户确认 |
| Opera | ✅ 完全支持 | 基于Chromium |
